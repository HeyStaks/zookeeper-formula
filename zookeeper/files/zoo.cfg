{% from 'zookeeper/settings.sls' import zk with context %}
tickTime=2000
initLimit=10
syncLimit=5
dataDir={{ zk.data_dir }}
clientPort={{ zk.client_port }}
{%- if zk.snap_count != 'None' %}
snapCount={{ zk.snap_count }}
{%- endif %}
autopurge.snapRetainCount={{ zk.snap_retain_count }}
{%- if zk.purge_interval != 'None' %}
autopurge.purgeInterval={{ zk.purge_interval }}
{%- endif %}
{%- if zk.max_client_cnxns != 'None' %}
maxClientCnxns={{ zk.max_client_cnxns }}
{%- endif %}
{%- if zk.zookeeper_hostnames|length() == 1 %}
clientPortAddress={{ zk.bind_address }}
{%- else %}
{%- for id in zk.zookeeper_myids %}
{#- rstrip() added to get rid of the newline character that zookeeper_myid has in the values #}
server.{{ zk.zookeeper_myids[id].rstrip() }}={{ zk.zookeeper_ips[id][0] }}:2888:3888 
{%- endfor %}
{%- endif %}
